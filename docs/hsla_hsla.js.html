<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: hsla/hsla.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: hsla/hsla.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const chroma = require('chroma-js');

const eq = require('../eq');
const ifelse = require('../ifelse');
const lt = require('../lt');
const round = require('../round');
const { parseFn, toPercent, toDecimal } = require('../utils');

const rgb2hsl = (r, g, b, a = 1) => {
  const rn = `(${r} / 255)`;
  const gn = `(${g} / 255)`;
  const bn = `(${b} / 255)`;

  const max = `max(${rn}, ${gn}, ${bn})`;
  const min = `min(${rn}, ${gn}, ${bn})`;

  const maxminusmin = `max(${max} - ${min}, 0.0000000000001)`;

  const l = `((${max} + ${min}) / 2)`;

  const s1 = `(${max} - ${min}) / (${max} + ${min})`;
  const s2 = `(${max} - ${min}) / (2.0 - ${max} - ${min})`;

  const s = ifelse(round(l), s2, s1);

  const hr = `${ifelse(lt(g, b), 6, 0)} + (${gn} - ${bn}) / (${maxminusmin})`;
  const hg = `(2 + (${bn} - ${rn}) / (${maxminusmin}))`;
  const hb = `(4 + (${rn} - ${gn}) / (${maxminusmin}))`;

  const h = `(${ifelse(eq(rn, max), hr, ifelse(eq(gn, max), hg, hb))} * 60)`;

  return [h, s, l, a];
};

/**
 * Creates an hsla color by given parts or convert any color to hsla.
 * @param {(number|string)} h Hue value ranging from 0 to 360 or equivalent expression or css color to be converted to hsla
 * @param {(number|string)} s Saturation value as percent or equivalent expression
 * @param {(number|string)} l Lightness value as percent or equivalent expression
 * @param {(number|string)} a Alpha channel as decimal or equivalent expression
 * @returns {string} The resulting css color value
 */
function hsla(h, s, l, a) {
  if (h &amp;&amp; !l) {
    a = s;

    const color = h;

    if (color.match(/(hsl|rgb)a?\(/)) {
      let [name, ...args] = parseFn(color);

      if (name.startsWith('rgb')) {
        let [r, g, b] = args;

        [h, s, l, a] = rgb2hsl(r, g, b, a || args[3]);
      } else {
        [h, s, l] = args;
        a = a || args[3];

        s = toDecimal(s);
        l = toDecimal(l);
      }
    } else {
      try {
        const chr = chroma(color);

        [h, s, l] = chr
          .hsl()
          .slice(0, 3)
          .map((v) => (v = isNaN(v) ? 0 : v))
          .map((v, i) => (i === 1 || i === 2 ? `${Math.round(v * 100)}%` : v));

        a = chr.alpha();
      } catch (e) {
        return color;
      }
    }
  }

  a = typeof a !== 'undefined' ? a : 1;

  return `hsla(${h}, ${toPercent(s)}, ${toPercent(l)}, ${a})`;
}

module.exports = hsla;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#abs">abs</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#alpha">alpha</a></li><li><a href="global.html#and">and</a></li><li><a href="global.html#blue">blue</a></li><li><a href="global.html#brightness">brightness</a></li><li><a href="global.html#calc">calc</a></li><li><a href="global.html#darken">darken</a></li><li><a href="global.html#divide">divide</a></li><li><a href="global.html#eq">eq</a></li><li><a href="global.html#eval">eval</a></li><li><a href="global.html#floor">floor</a></li><li><a href="global.html#green">green</a></li><li><a href="global.html#gt">gt</a></li><li><a href="global.html#gte">gte</a></li><li><a href="global.html#hsla">hsla</a></li><li><a href="global.html#hue">hue</a></li><li><a href="global.html#ifelse">ifelse</a></li><li><a href="global.html#lightness">lightness</a></li><li><a href="global.html#lt">lt</a></li><li><a href="global.html#lte">lte</a></li><li><a href="global.html#luminance">luminance</a></li><li><a href="global.html#mix">mix</a></li><li><a href="global.html#mod">mod</a></li><li><a href="global.html#multiply">multiply</a></li><li><a href="global.html#not">not</a></li><li><a href="global.html#or">or</a></li><li><a href="global.html#pow">pow</a></li><li><a href="global.html#red">red</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#rgba">rgba</a></li><li><a href="global.html#round">round</a></li><li><a href="global.html#saturation">saturation</a></li><li><a href="global.html#subtract">subtract</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Jan 29 2022 17:07:18 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
