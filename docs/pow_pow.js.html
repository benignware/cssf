<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pow/pow.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pow/pow.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const add = require('../add');
const multiply = require('../multiply');
const divide = require('../divide');
const { stripCalc } = require('../utils');

const gcd = (a, b) => (b ? gcd(b, a % b) : a);

const fr = (fraction, denominator = 100) => {
  const numerator = fraction * denominator;
  const n = gcd(numerator, denominator);

  return [numerator / n, denominator / n];
};

function nthRoot(num, n = 2, prec = 4) {
  let x = 1;

  for (var i = 0; i &lt; prec; i++) {
    x = multiply(1 / n, add(multiply(n - 1, x), divide(num, pow(x, n - 1))));
  }

  return x;
}

/**
 * Returns a number raised to the power of an exponent.
 * Rather expensive, so try to avoid.
 * @param {*} base A numerical expression
 * @param {number} exponent A static number that may be a decimal
 * @param {number} precision The precision at which fractional exponent is applied
 * @returns {string} A numerical expression that resolves to the power of given base and exponent
 */
function pow(base, exponent, precision = 5) {
  base = stripCalc(base);
  const int = Math.floor(exponent);
  const remainder = Number((exponent - int).toFixed(2));

  let product = 1;

  for (let i = 0; i &lt; int; i++) {
    product = multiply(product, base);
  }

  if (remainder > 0) {
    const [m, n] = fr(remainder);
    const root = nthRoot(base, n, precision);
    const p = pow(root, m);

    product = multiply(product, p);
  }

  return product;
}

module.exports = pow;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#abs">abs</a></li><li><a href="global.html#add">add</a></li><li><a href="global.html#alpha">alpha</a></li><li><a href="global.html#and">and</a></li><li><a href="global.html#blue">blue</a></li><li><a href="global.html#brightness">brightness</a></li><li><a href="global.html#calc">calc</a></li><li><a href="global.html#darken">darken</a></li><li><a href="global.html#divide">divide</a></li><li><a href="global.html#eq">eq</a></li><li><a href="global.html#eval">eval</a></li><li><a href="global.html#floor">floor</a></li><li><a href="global.html#green">green</a></li><li><a href="global.html#gt">gt</a></li><li><a href="global.html#gte">gte</a></li><li><a href="global.html#hsla">hsla</a></li><li><a href="global.html#hue">hue</a></li><li><a href="global.html#ifelse">ifelse</a></li><li><a href="global.html#lightness">lightness</a></li><li><a href="global.html#lt">lt</a></li><li><a href="global.html#lte">lte</a></li><li><a href="global.html#luminance">luminance</a></li><li><a href="global.html#mix">mix</a></li><li><a href="global.html#mod">mod</a></li><li><a href="global.html#multiply">multiply</a></li><li><a href="global.html#not">not</a></li><li><a href="global.html#or">or</a></li><li><a href="global.html#pow">pow</a></li><li><a href="global.html#red">red</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#rgba">rgba</a></li><li><a href="global.html#round">round</a></li><li><a href="global.html#saturation">saturation</a></li><li><a href="global.html#subtract">subtract</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Jan 29 2022 17:07:18 GMT+0100 (Mitteleurop√§ische Normalzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
